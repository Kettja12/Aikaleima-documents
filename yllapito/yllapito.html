
<html>
<head>
    <meta charset="UTF-8">
    <title>Ylläpito</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/prism.css">

    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/prism.js" data-manual></script>
    <script src="/js/prism-file-highlight.js"></script>

</head>
<body>
    <article>
        <h2>Ylläpito</h2>
		<p> Sovellus on Blazor Server Side web-sovellus. Eli yksinkertaistettuna perinteinen mainframe-sovellus steroideilla ja graafisena.
			Kun käyttäjä painaa jotain painiketta tai klikkaa jotain näytöllä, tieto menee palvelimelle ja käsitellään siellä. Tämän jälkeen työaseman näyttö palautetaan uudelleen muotoiltuna uudella datalla. Eli erittäin tietoturvallinen ratkaisu teknisellä tasolla. Sovelluksen rakenne ja toteutus löytyy
			seuraavan linkin takaa sitä mukaa kun sitä ehditään tekemään.
		</p>
        <p>
            Kuvat ovat kehitysversiosta, joka eroaa testiversiosta jonkin verran ulkoasultaan ja toiminnoiltaan.
           Kuvissa on merkitty punaisella korostuksella kehityksen alla olevat toiminnot. 
        </p>
        <p>
            <a href="lahdekoodidokumentaatio/lahdekoodidokumentaatio.html" class="btn btn-primary">Lähdekoodidokumentaatio</a>
        </p>

    </article>
    <article>
        <h2>Kirjautuminen</h2>
        <p style="overflow: auto;">
            <img src="kirjautuminen.png" alt="Kirjautuminen" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Kun sovellus käynnistyy, se pyytää käyttäjää kirjautumaan ensimmäisellä käyttökerralla. Kirjautumistunnus on testiympäristössä "testi"
            ja tuotantoympäristössä asiakaskohtainen tunnus. Kirjautumistoiminnon avulla pääsee laitteella asiakastietojen ylläpitoon.
            Kirjautumisavain on kertakäyttöinen ja se syötetään kirjautumisnäytössä. Kirjautuminen aktivoi tunnuksen ja yksilöi laitteen.
            <br>
            <br>
            Ohjelma käyttää sisäistä mekanismia tiedonsiirron yksilöimiseen selaimen ja palvelimen välillä. Sovelluksesta ei kirjauduta ulos,
            joten selainistunto pysyy kirjautuneena. Mikäli sovellus ei toimi ja uudelleenkirjautuminen vaaditaan,
            käyttäjän tulee tilata tunnuksen avaus asiakkaan sopiman käytännön mukaisesti.
            Kirjautumisavaimen luontitoiminnolla käyttäjä voi kirjautua uudelleen samalla tai toisella laitteella.
            Kirjautumistunnus on sidottu selaimeen tai laitteeseen. Samaa tunnusta ei voi myöskään aktivoida toiselle selaimelle tai laitteelle samanaikaiseen käyttöön;
            jokaiselle selaimelle tai laitteelle vaaditaan oma tunnus.
            <br>
            <br>
            Jos kaksivaiheinen tunnistautuminen on käyttäjällä päällä, ohjelman käynnistyessä mahdollisen PIN-koodin syöttämisen jälkeen näytölle tulee ilmoitus "Odotan kirjautumista päätelaitteelta". Käyttäjän pitää silloin mennä leimaussovelluksen kirjautumisvälilehdelle, jossa on ilmoitus "Olet kirjautumassa sovellukseen". Käyttäjän pitää painaa joko "Kirjautuminen" / "Peru kirjautuminen" / "Ilmoita virheellisestä kirjautumisesta" -painiketta.
            Tämän jälkeen selainikkunassa oleva sovellus kirjautuu sisään. 
            <a href="mfa/kirjautuminen.html" class="btn btn-primary">Kaksivaiheinen tunnistautuminen</a>
        </p>
    </article>
    <article>
        <h2>Kotisivu</h2>
        <p style="overflow: auto;">
            <img src="kotisivu.png" alt="Kotisivu" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Kirjautumisen jälkeen avautuu kotisivu. Kotisivulla on linkit eri toimintoihin. Toiminnot on kuvattu alla. Kotisivulle on tavoitteena lisätä tilastoja leimauksista
            sekä virhelokien näyttö.
        </p>
    </article>

    <article>
        <h2>Käyttäjät</h2>
        <p style="overflow: auto;">
            <img src="kayttajat.png" alt="Kayttajat" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Käyttäjänäytöllä ylläpidetään asiakkaan aikaleimapalvelun ylläpitäjien tietoja. Tyypillisesti 1–2 henkilöä, jotka kirjautuvat omilta työasemiltaan palveluun.
            Käyttäjäkohtaisesti voidaan asettaa PIN-koodi suojaamaan kirjautumista. Käyttäjä antaa haluamansa PIN-koodin ensimmäisellä kirjautumisella ja se tallentuu palvelimelle.
            <br>
            <br>
            Sovelluksen käynnistyessä ohjelma kirjautuu selaimen IndexDB-kannassa olevalla kirjautumisavaimella.
            <br>
            Jos kirjautuminen onnistuu ja pin-koodin kysyminen on laitettu käyttäjälle niin ohjelma kysyy vielä käyttäjän PIN-koodin, jolla varmistetaan, että oikea käyttäjä on kirjautumassa.
            <br>
            <br>
            Töissä törmäsin kaksivaiheisen tunnistautumisen esittelyyn tai MFA:han kuten sitä kutsutaan. Aloin pohtimaan,että  miten sen voisi toteuttaa yksinkertaisesti. Ohjelman kuvissa näkyy jo, miten ajattelin sen toteuttaa.
        </p>
    </article>
    <article>
        <h2>Leimauslajit</h2>
        <p style="overflow: auto;">
            <img src="leimauslajit.png" alt="Leimauslajit" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Leimauslajit sisältävät nimitiedon ja asiakkaan järjestelmien mukaisen leimaustietoon liittyvän avaimen. Näin tietojen siirrossa asiakasjärjestelmiin voidaan yksilöidä leimaustapahtuma.
        </p>
    </article>
    <article>
        <h2>Leimaajat</h2>
        <p style="overflow: auto;">
            <img src="leimaajat.png" alt="Leimaajat" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Leimaajat sisältävät nimitiedon ja asiakkaan järjestelmien mukaisen leimaajaan liittyvän avaimen. Näin tietojen siirrossa asiakasjärjestelmiin voidaan yksilöidä leimaustapahtuma.
        </p>
    </article>
    <article>
        <h2>Laitteet</h2>
        <p style="overflow: auto;">
            <img src="laitteet.png" alt="Laitteet" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Laitteet sisältävät yksilöivän nimitiedon. Laite voi olla henkilökohtainen, kuten puhelinsovellus, jolloin laite kytketään leimaajatiedossa olevaan tietoon.
            Laite voi olla yleinen leimauspääte, jolloin leimaustilanteessa täytyy leimaajan syöttää henkilökohtainen avain leimaustapahtuman kohdistamiseksi. Laitteen aikatiedot toimivat leimauksen perusteena.
            <br>
            <br>
            Laitteelle voidaan myös kytkeä GPS-asetus päälle, jolloin leimaustilanteessa tallennetaan leimauksen yhteyteen myös koordinaatit. Ohjelma kysyy oikeutta sijaintitiedon käyttöön ensimmäisellä kerralla selaimessa ja puhelimessa.
            <br>
            <br>
            Laitteeseen voidaan kytkeä käyttäjä, jolloin seurauksena on, että käyttäjällä aktivoituu kaksivaiheinen tunnistautuminen. Siitä tarkemmin kirjautumiskohdassa.
        </p>
    </article>
    <article>
        <h2>Leimaukset</h2>
        <p>
        <p style="overflow: auto;">
            <img src="leimaukset.png" alt="Leimaukset" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            <br>
            <br>
            Listassa näkyy sijaintitieto ja malliksi nyt lisätty linkki Google Mapsiin. Maps kuvasta jo näkee, että selaimen antama sijainti ei ole tarkka, mutta puhelimen GPS-tieto on tarkka.
        </p>
    </article>
    <article>
        <h2>Leimaus</h2>
        <p style="overflow: auto;">
            <img src="leimaus.png" alt="Leimaus" width="300" style="float: left; margin-right: 15px; margin-bottom: 5px;" />
            Sovelluksella voidaan tehdä myös leimaus. Silloin kuitenkin tulee kirjautua leimaustunnuksella, joka on eri kuin ylläpidon tunnus.
            Jos laite on yleinen leimauspääte, tulee leimaajan syöttää henkilökohtainen avain leimaustapahtuman kohdistamiseksi. Sopivilla lisälaitteilla
            voidaan käyttää myös viivakoodinlukijaa, vaikkapa henkilökortista viivakoodin lukemiseen, tai RFID-lukijaa sirulta leimaajan tunnistamiseen.
        </p>
    </article>
<script>
         window.onload = function() {
            // Haetaan kaikki kuvat, jotka ovat <article>-elementtien sisällä
            const images = document.querySelectorAll('article img');

            // Lisätään jokaiseen kuvaan tapahtumankäsittelijät
            images.forEach(img => {
                const originalWidth = img.width; // Tallennetaan alkuperäinen leveys

                img.addEventListener('mouseover', () => {
                    img.style.width = '600px'; // Muutetaan leveys 600px, kun hiiri on päällä
                });
                img.addEventListener('mouseout', () => {
                    img.style.width = originalWidth + 'px'; // Palautetaan alkuperäinen leveys, kun hiiri poistuu
                });
            });
        }
    
</script>
</body>
</html>